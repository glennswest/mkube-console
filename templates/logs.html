{% extends "layout.html" %}

{% block page_content %}
<h1 class="page-title">Logs</h1>
<p class="page-subtitle">Container log viewer</p>

<div x-data="{ selectedPod: '', selectedNs: '' }">
  <div class="toolbar">
    <div class="toolbar-left">
      <select @change="
        let parts = $event.target.value.split('/');
        selectedNs = parts[0];
        selectedPod = parts[1];
      ">
        <option value="">Select a pod...</option>
        {% for p in pods %}
        <option value="{{ p.namespace }}/{{ p.name }}">{{ p.namespace }}/{{ p.name }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <template x-if="selectedPod">
    <div class="log-viewer"
         :hx-get="'/api/v1/namespaces/' + selectedNs + '/pods/' + selectedPod + '/log'"
         hx-trigger="load, every 3s"
         hx-swap="innerHTML">
      <div class="log-loading">Loading logs...</div>
    </div>
  </template>

  <template x-if="!selectedPod">
    <div class="empty-state">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
      <h3>Select a pod</h3>
      <p>Choose a pod from the dropdown above to view its logs.</p>
    </div>
  </template>
</div>
{% endblock %}
